# MVP Implementation Plan

## Tech Stack

| Layer | Technology |
|-------|------------|
| Framework | Next.js 16 (App Router) |
| Styling | Tailwind CSS |
| AI | Vercel AI SDK + Vercel AI Gateway |
| Model | Claude Haiku 4.5 (default) |
| Hosting | Vercel |
| Database | None (stateless MVP) |

---

## Phase 1: Project Setup

### 1.1 Initialize Project
- [ ] Create Next.js 16 project with App Router
- [ ] Configure Tailwind CSS
- [ ] Set up project structure:
  ```
  app/
    page.tsx          # Main game component
    api/
      generate/
        route.ts      # AI content generation endpoint
    layout.tsx
  components/
    InputScreen.tsx
    GameScreen.tsx
    SuccessScreen.tsx
    Confetti.tsx
  lib/
    audio.ts          # Web Audio API utilities
  ```

### 1.2 Configure Vercel AI SDK
- [ ] Install `ai` and `@ai-sdk/anthropic` packages
- [ ] Set up Vercel AI Gateway in Vercel project settings
- [ ] Configure `ANTHROPIC_API_KEY` environment variable

---

## Phase 2: Core UI Components

### 2.1 Input Screen
- [ ] App title and branding
- [ ] Text input field (large, touch-friendly)
- [ ] Start button
- [ ] Error message display (on AI failure: "Try a different word")

### 2.2 Loading Screen
- [ ] Spinner animation
- [ ] "Making game..." text

### 2.3 Game Screen
- [ ] Header with back button and "Find: {word}" label
- [ ] 3 tappable cards in responsive grid
- [ ] Card states: normal, disabled (grayed), correct (highlighted)

### 2.4 Success Screen
- [ ] Confetti canvas animation
- [ ] Celebration message
- [ ] Display correct answer (visual + text)
- [ ] Play Again button

---

## Phase 3: AI Integration

### 3.1 API Route (`/api/generate`)
- [ ] Accept POST with `{ word: string }`
- [ ] Use Vercel AI SDK with `generateObject()` for structured output
- [ ] Define Zod schema for response validation:
  ```ts
  {
    type: "color" | "emoji",
    targetValue: string,
    distractors: [string, string]
  }
  ```

### 3.2 Prompt Engineering
- [ ] System prompt to classify input as color vs thing
- [ ] Accept parent input in any language, generate appropriate content
- [ ] Generate contextually appropriate distractors
- [ ] Ensure distractors are visually distinct

---

## Phase 4: Game Logic

### 4.1 State Management
- [ ] Screen state: `input` | `loading` | `game` | `success`
- [ ] Game data: type, target, items (shuffled)
- [ ] Item states: track disabled items

### 4.2 Interaction Handling
- [ ] Tap detection on cards
- [ ] Wrong tap: disable card, play error sound
- [ ] Correct tap: highlight, play success sound, 1.5s delay, transition

### 4.3 Audio Engine
- [ ] Singleton AudioContext (browser autoplay policy)
- [ ] Success sound: C5 → E5 → G5 → C6 arpeggio (sine wave)
- [ ] Error sound: descending tone (sawtooth)
- [ ] Unlock audio on first user interaction

---

## Phase 5: Polish & Deploy

### 5.1 Responsive Design
- [ ] Mobile-first layout
- [ ] Landscape mode support (horizontal card layout)
- [ ] Touch-friendly tap targets (min 44px)

### 5.2 Basic Accessibility
- [ ] Semantic HTML elements
- [ ] Visible focus states
- [ ] Sufficient color contrast

### 5.3 Deployment
- [ ] Configure Vercel project
- [ ] Set environment variables
- [ ] Test on mobile devices

---

## Decisions

| Topic | Decision |
|-------|----------|
| Input filtering | Trust parents, no filtering |
| Fallback behavior | Show error message, no retries or fallbacks |
| Language support | UI in English only; LLM accepts parent input in any language |
| Offline support | Not required |
| Analytics | None for MVP |
| Accessibility | Basic (semantic HTML, focus states, color contrast)

---

## Dependencies

```json
{
  "dependencies": {
    "next": "^16.0.0",
    "react": "^19.0.0",
    "ai": "^4.0.0",
    "@ai-sdk/anthropic": "^1.0.0",
    "zod": "^3.23.0",
    "lucide-react": "^0.400.0"
  },
  "devDependencies": {
    "tailwindcss": "^4.0.0",
    "@tailwindcss/postcss": "^4.0.0",
    "typescript": "^5.0.0"
  }
}
```

---

## Estimated Phases

| Phase | Description |
|-------|-------------|
| 1 | Project Setup |
| 2 | Core UI Components |
| 3 | AI Integration |
| 4 | Game Logic |
| 5 | Polish & Deploy |
